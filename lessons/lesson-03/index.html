<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Lesson 3 | GEOG 4046 Web GIS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/open-iconic/1.1.1/font/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="/css/cayman.css">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="stylesheet" href="/css/style.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MNMHZ6YTJV"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-MNMHZ6YTJV');</script>
  </head>
  <body>
    <section class="page-header">
      <div class="shadebox title-box">
        <h1 class="project-name"><a href="/">GEOG 4046</a></h1>
        <h2 class="project-tagline">An Introduction to Web GIS</h2>
        <div class="text-center">
          <a href="/">About</a> |
          <a href="/lessons">Lessons</a> |
          <a href="/assignments">Assignments</a>
        </div>
      </div>
    </section>
    <section class="main-menu">

    </section>

    <section class="main-content">
      <div class="text-left"><small>Module 1 &rsaquo; Lesson 3 </small></div>
      <h1 class="text-center">Web Services</h1>
      <h2 id="table-of-contents">Table of Contents</h2>
<ul>
  <li><a href="#web-service-not-website">Web service, not website</a></li>
  <li><a href="#machines-talking-to-machines">Machines talking to machines</a></li>
  <li><a href="#the-uniform-resource-locator">The Uniform Resource Locator</a></li>
  <li><a href="#getting-a-response-from-a-web-service">Getting a response from a web service</a></li>
  <li><a href="#purpose-and-possibilities">Purpose and possibilities</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<p>This lesson introduces web services as a technology for moving information, especially for interoperability and automation.</p>

<h2 id="web-service-not-website">Web service, not website</h2>
<p>What happens if you enter a web address such as <a href="https://www.census.gov">https://www.census.gov</a> into a web <dfn title="Software that reads the code of a webpage document and renders the code as visual elements, e.g., fonts and graphics, to display on screen to the user.">browser</dfn>? You see something you have seen countless times before: a webpage.</p>

<p>What about the web address <a href="https://www.census.gov/content/dam/Census/about/regions/all-regions/new_ro_map.png">https://www.census.gov/content/dam/Census/about/regions/all-regions/new_ro_map.png</a>? Again, nothing surprising: an image.</p>

<p>Now how about the web address <a href="https://api.census.gov/data/2019/acs/acs5?get=B01003_001E&amp;for=state:22">https://api.census.gov/data/2019/acs/acs5?get=B01003_001E&amp;for=state:22</a>? If the Census Bureau website is working, you should get this simple response (2019 population of Louisiana):</p>

<pre><code>[["B01003_001E","state"],
["4664362","22"]]
</code></pre>

<p>It is not a webpage, but you have used something like this countless times as well, maybe without knowing it. You contacted an application on the Internet known as a web service and it returned data to you.</p>

<p>Why would anyone create such a thing? Would it not be easier to use and read that data if the U.S. Census Bureau put the population number on a website, maybe with links to other states’ data? Maybe that would be easier for humans to read, but the real utility of web services is that they are easier for machines to use.</p>

<p>These technologies separate the data from the presentation. The data is offered in a more raw, modular form that can “plug in” to other applications, creating interesting possibilities for automation and new apps that combine data sources.</p>

<h2 id="machines-talking-to-machines">Machines talking to machines</h2>
<p>A <strong>web service</strong> is a program on a web server that provides access to resources like data and processing power to other applications on the web via programming interfaces, allowing communication between applications. Stated more plainly, web services are one way that machines talk to other machines online, sharing and processing data. Web services can be understood through examples better than textbook definitions, so some are given below and the assignment that accompanies this lesson gives a concrete demonstration.</p>

<p>Think about Facebook as an application, with the user sign-in function handled by a service. Facebook can use its own sign-in service on its website and app, but it can also <a href="https://developers.facebook.com/docs/facebook-login/web/">open up that service to third parties</a>. Web services are why you can use a Facebook account to sign into other websites, and why Disney+ customers can pay with PayPal, and why a Weather Underground map can show a radar <dfn title="Imagery or graphics drawn on a map to represent geographic information of a similar type, e.g., highways, usually described in a legend (Lesson 1)">layer</dfn> from the Weather Channel website, and so on.</p>

<p><img src="../../lessons/images/web-services.png" alt="Servers and clients using web services on the modern web" />
<em>Figure 1. Servers communicating with other servers through web services to provide resources to clients. Web services allow communication between computer systems, such as signing into ArcGIS with a Facebook account, or Spotify hosting its business operations in Google Cloud and Amazon Web Services.</em></p>

<p><img src="../../lessons/images/weather-radar-service.png" alt="Weather radar web service" class="shadow" />
<em>Figure 2. A weather map (wunderground.com) that displays radar imagery from a different website (weather.com) via a web service. The right panel (wunderground.com) shows the map with a mosaic of radar tiles, while the left (Chrome Developer Tools) shows the URLs of the individual tiles downloaded by my browser and pieced together on the map.</em></p>

<p>The data is not necessarily being duplicated for each of these websites. Instead, they request the data via a web service and display it through their own website. The Weather Underground website does not need a copy of all Weather Channel radar imagery, it can simply request the images directly from the Weather Channel servers and deliver them to your browser. Likewise, if you can sign into Spotify with a Google account, it is not because Spotify has a copy of all Google users and passwords, it is because their computer systems communicate via web services to authenticate your account and, if successful, sign in.</p>

<p>Web services can be reached through a unique address, similar to how we access websites.</p>

<h2 id="the-uniform-resource-locator">The Uniform Resource Locator</h2>
<p>Normally, a <strong>URL</strong>, or uniform resource locator, is a web address you use to go to a website, e.g., <code>https://example.org</code>. But URLs can point to other resources on the Internet.</p>

<p>The vague term “resources” is used because it does not refer to a specific type of file or form of media. A “resource” can be a document, image, video, etc. In the case of webpages, the URL might point to a document like <code>index.html</code>. Or it might be <code>logo.png</code> for an image.</p>

<p>But URLs do not necessarily have to point to files. When you visit most websites, you are not simply downloading an existing document file, you are triggering an application to generate a webpage document. For example, when you sign into your email hosted by Microsoft and the page shows your name at the top and lists your messages, Microsoft does not have a webpage file with your name on it already along with the text of your current messages. The page you see was generated by an application when you accessed the page, pulling your name and current messages dynamically from a database.</p>

<p><img src="../../lessons/images/server-client-request-response.png" alt="Clients send requests, servers send responses" />
<em>Figure 3. To download webpages, images, and other resources from a web server, clients like browsers and mobile apps contact the server via its URL.</em></p>

<p>Webpages that seem personalized, or that let you interact and customize the experience, are applications that are responding to your input, including the URL you used to access the page. To use an online shopping example, going to <code>example.com/cart</code> might take you to a shopping cart page that shows you the products you have added, then <code>example.com/checkout</code> would show you a page where you can pay the amount due. In both cases, an application is generating pages triggered by the URL request, based on information the application pulled from the product database, customer database, and any other data sources needed for you to check out.</p>

<p>This idea of an application responding to a URL, and from that getting information from a data source, is an important concept for web services.</p>

<h2 id="getting-a-response-from-a-web-service">Getting a response from a web service</h2>
<p>In these examples, we will interact with web services by entering their URLs into a browser. The URLs will contain input parameters, which specify what we want the web service to do for us.</p>

<p>Note that web services do not always accept input in the URL in this way. There are other methods outside the scope of this lesson, but if you learn more about web services, you will encounter some that work differently.</p>

<h3 id="census-api">Census API</h3>
<p>Let us go back to the URL that was used in the lesson’s introduction. We will use our web browser to access a web service for population data, the US Census Bureau Data API. An <strong>application programming interface</strong> is a system that allows a program to offer its functions to other connected programs. API is a common term in the world of web GIS, web services, and programming in general. Web services can be considered a type of API, as they are an interface for applications to talk to each other.</p>

<p><a href="https://api.census.gov/data/2019/acs/acs5?get=B01003_001E&amp;for=state:22">https://api.census.gov/data/2019/acs/acs5?get=B01003_001E&amp;for=state:22</a></p>

<p>The text in the URL above specifies what information we are requesting from the server. This <strong>endpoint</strong>, or URL for a web service, points to a U.S. Census Bureau application that returns census data based on your request parameters. Note these two parameters in the URL that let us specify what piece of data we are requesting and which US state we want it for:</p>

<p><code>get=B01003_001E</code><br />
<code>for=state:22</code></p>

<p>The value <code>B01003_001E</code> is the code for total population and <code>22</code> is the code for Louisiana. This endpoint triggers the Census Bureau application to dig into its data sources to find the population of Louisiana. Once found, the application responds in text format, sending the following output across the Internet to your web browser.</p>

<pre><code>[["B01003_001E","state"],
["4664362","22"]]
</code></pre>

<p>We just used a web service!</p>

<p>The first line of the response above can be thought of like column headings in a spreadsheet: the first “column” is <code>B01003_001E</code>, which is the population, and the second “column” <code>state</code> is the US state. Then the second row has the values, i.e., the population of Louisiana. Test what happens when you add another state into your request by changing the <code>state</code> input parameter (hint: 23 is the code for Maine):</p>

<p><code>for=state:22,23</code></p>

<p>In the response, you should see an additional “row” of data: the population of Maine.</p>

<h3 id="wikipedia-api">Wikipedia API</h3>
<p>Another example can be seen with Wikipedia, where you can read an article by visiting the Wikipedia website or through alternative means of access that Wikipedia provides. Enter this address in your browser:</p>

<p><a href="https://en.wikipedia.org/api/rest_v1/page/summary/Roger%20Tomlinson">https://en.wikipedia.org/api/rest_v1/page/summary/Roger%20Tomlinson</a></p>

<p>Instead of seeing a webpage with an article, you should see structured data. That is because the link does not point to the usual Wikipedia address, it points to another web application meant to serve data. Here, the data the address is retrieving is the “extract” portion of the Wikipedia article for Roger Tomlinson.</p>

<pre><code>...
"extract": "Roger Frank Tomlinson was an English-Canadian geographer and the primary originator of modern geographic information systems (GIS), and has been acknowledged as the \"father of GIS.\"",
...
</code></pre>

<p>By creating this web service, Wikipedia is opening up access to their database of article data so the content can be reused by other applications more easily.</p>

<h3 id="google-maps-geocoding-api">Google Maps Geocoding API</h3>
<p>Now take a look at another example using one of Google’s web services. This is a URL for Google’s geocoding service. It turns street addresses into latitude and longitude coordinates.</p>

<p><a href="https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBpMtOAYhhjn6SBDaxN8yHCkvfrGb7TuSc&amp;address=5151 Highland Road, Baton Rouge, LA">https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBpMtOAYhhjn6SBDaxN8yHCkvfrGb7TuSc&amp;address=5151 Highland Road, Baton Rouge, LA</a></p>

<p>You can pick out the street address at the end of the URL, where it is assigned to a variable named <code>address</code>.</p>

<p>The response looks like a lot of code, from which we can pick out the part that gives the latitude and longitude.</p>

<pre><code>...
"formatted_address" : "5151 Highland Rd, Baton Rouge, LA 70808, USA",
  "geometry" : {
    "location" : {
       "lat" : 30.3964204,
       "lng" : -91.16252729999999
    },
...
</code></pre>

<p>Yet another example URL for the geocoding service does a reverse lookup and gives us an address based on the latitude and longitude we put in the URL:</p>

<p><a href="https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBpMtOAYhhjn6SBDaxN8yHCkvfrGb7TuSc&amp;latlng=30,-90">https://maps.googleapis.com/maps/api/geocode/json?key=AIzaSyBpMtOAYhhjn6SBDaxN8yHCkvfrGb7TuSc&amp;latlng=30,-90</a></p>

<p>At the end of the URL you can see the variable “latlng” and it is equal to “30,-90”, a simple latitude and longitude pair. In the result you can find the full address that the API found for those coordinates.</p>

<pre><code>...
"formatted_address" : "7501 Terminal Rd, New Orleans, LA 70126, USA",
...
</code></pre>

<h3 id="noaa-web-service">NOAA web service</h3>
<p>Here is one last example of a web service, showing current weather radar. The resource this long URL returns is an image.</p>

<p><a href="https://mapservices.weather.noaa.gov/eventdriven/rest/services/radar/radar_base_reflectivity/MapServer/export?bbox=-125%2C27%2C-75%2C45&amp;bboxSR=4326&amp;layers=&amp;layerDefs=&amp;size=800%2C600&amp;imageSR=&amp;format=png&amp;transparent=false&amp;dpi=&amp;time=&amp;layerTimeOptions=&amp;dynamicLayers=&amp;gdbVersion=&amp;mapScale=&amp;rotation=&amp;datumTransformations=&amp;layerParameterValues=&amp;mapRangeValues=&amp;layerRangeValues=&amp;f=Image">https://mapservices.weather.noaa.gov/eventdriven/rest/services/radar/radar_base_reflectivity/MapServer/export?bbox=-125%2C27%2C-75%2C45&amp;bboxSR=4326&amp;layers=&amp;layerDefs=&amp;size=800%2C600&amp;imageSR=&amp;format=png&amp;transparent=false&amp;dpi=&amp;time=&amp;layerTimeOptions=&amp;dynamicLayers=&amp;gdbVersion=&amp;mapScale=&amp;rotation=&amp;datumTransformations=&amp;layerParameterValues=&amp;mapRangeValues=&amp;layerRangeValues=&amp;f=Image</a></p>

<p><img src="../../lessons/images/weather-service-response2.png" alt="Response from a web service that produces an image" />
<em>Figure 4. Response from a NOAA weather radar web service showing current precipitation at the time the image was captured. The response is an image covering the continental U.S., demonstrating that web services can return more types of information than only text.</em></p>

<p>You can see, though, that the image is of limited use by itself; it is intended to be consumed by an application that then does something with it, like overlay it onto a national map. For example, ArcGIS Online can display map data from a web service.</p>

<p><img src="../../lessons/images/arcgis-online-display-web-service.png" alt="ArcGIS Online displays a web service" class="shadow" />
<em>Figure 5. The ArcGIS Online Map Viewer is an application capable of displaying the response of a web map service. The radar imagery shown in the viewer comes from a NOAA web service, while the gray basemap in the background comes from an <dfn title="Company that develops ArcGIS software">Esri</dfn> web service.</em></p>

<h2 id="purpose-and-possibilities">Purpose and possibilities</h2>
<p>If a web service is not a website, then what are we seeing when we enter these URLs? The response we see is the output of a program dedicated to a specific type of input and output. So, when we contact this web service via its endpoint URL, we are running a program.</p>

<h3 id="meant-for-machines-not-people">Meant for machines, not people</h3>
<p>Why isn’t the output of these programs easier to read? Actually, we are not using the web services as intended when we try to view them in the browser. Web service responses are not really meant to be seen, or “consumed”, by humans at all, at least not in their raw form. Instead, web services are meant to be used by other applications. They are a way for applications to communicate with one another.</p>

<p>If a human wants to see an address location on a map, they can just put the address into a search engine and see a map in the results. Behind the scenes, however, there are applications using services to work together to generate those results. Google Search is using Google’s geocoding service, sending your input to the service, receiving the response, and nicely displaying it on a map with the help of Google’s other map-related web services.</p>

<p><img src="../../lessons/images/google-map-search-results.png" alt="Google search results with a map" class="shadow centered" />
<em>Figure 6. Google search results for the address “5151 Highland Rd, Baton Rouge, LA 70808, USA”, showing the address location as a point on a map. Google Search uses the Google Maps Geocoding API behind the scenes to translate the address into latitude and longitude coordinates (30.3964204, -91.1625273).</em></p>

<p>The significance here is that, since web services can transfer information between applications, they can enable automation: applications do not always need a human operator, or a human manually copying data from system to system. For something like weather that changes often, it would be hard to imagine a weather app that required the developer to manually go to a government website to download new radar data every 15 minutes, then upload it into their own application. With web services, they don’t have to. The dataset is provided as a utility that is always on and connected (like electricity), “streaming” the most up-to-date information into their app’s logic or onto the screen for users.</p>

<h3 id="interoperability">Interoperability</h3>
<p>Where the web was once a place where information was exchanged between people and applications, it is increasingly a system for connecting applications to each other through web services. The ability of applications to exchange information with other computer systems is known as <strong>interoperability</strong>.</p>

<p>Google’s geocoding API is not only used by Google; they make it available for use by third parties. For example, imagine you are developing a ride sharing mobile app and it needs to display a street address for rider locations. The app takes the phone’s current GPS coordinates and sends them to <code>maps.googleapis.com</code>, which matches the coordinates with an address. Then the app reads the response from the API and extracts the address, and then finally the app prints the address on screen to the user.</p>

<p>That is much easier than trying to take on the immense task of developing a geocoding application yourself, allowing you to focus on your ride sharing app (earlier in its development, Uber used the Google Maps APIs).</p>

<p>Another implication of web services is that data can be opened up to use in other applications, rather than being kept offline or only used through the provider’s website. Google could keep its geocoding service closed, available only through Google websites, but instead they operate it as a service that third parties can connect to.</p>

<p>NOAA, for example, makes its weather radar imagery and other data available as a web service. Anyone can make a website or application that uses this data. That is much more useful than if NOAA forced users to view its own website (which until recently was quite outdated).</p>

<p>This reinforces that web services help separate the data from the presentation, and the capability for programmatic access opens up possibilities for automation.</p>

<h2 id="conclusion">Conclusion</h2>
<p>Web services are a core part of web GIS. They allow geographic information (map data) to be spread and re-used in websites and applications for research, commerce, administration, personal use, etc. Maps, a form of information that has existed for thousands of years, are now also following this trend and being turned into web services to be consumed not just by humans but applications. If map layers are offered as web services, they can be re-used by many applications, and those applications can combine layers from other providers, too. This increases the potential for data to be shared and put to use.</p>

      <br><br>
      <a href="#top">&uarr; Top</a><br>
      <a href="../../lessons/">&larr; Back to Lessons</a>
    </section>
<footer class="site-footer">
  <small>&nbsp;&copy; All rights reserved.</small>
</footer>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
<script src="/js/prism.js"></script>
<script src="/js/custom.js"></script>
</body>
</html>

